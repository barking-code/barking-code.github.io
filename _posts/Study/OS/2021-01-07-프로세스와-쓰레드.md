---
layout: post
title: "프로세스와 쓰레드"
categories:
  - Study
  - OS
tags:
  - OS
created_at: 2021-01-07T22:45:00+09:00
modified_at: 2021-01-07T22:45:00+09:00
visible: true
---

## 프로세스

> 프로세스란 현재 프로세서(CPU 혹은 Core)가 수행하고 있는 프로그램의 작업 단위이다.

프로그램은 명령어와 데이터의 덩어리로 사용되지 않을 때는 보조기억장치에 저장되어 있다. 프로그램을 실행하게 되면 주기억장치(Memory)에 프로그램(코드의 일부)이 load되는데 이를 process라고 한다.

1개의 프로세서는 1개의 프로세스를 수행하게 되는데 운영체제위에서 수많은 프로세스들이 실행되기때문에 프로세스들에게 자원을 균일하게 분배하여 마치 동시에 동작하는 것(멀티태스킹)처럼 보인다.



### 프로세스 제어 블록(Process Control Block, PCB)

> 프로세스에 대한 정보가 담겨있는 자료구조이다.
>
> 모든 프로세스는 PCB를 가지고 종료되면 PCB도 소멸된다.

1. PID(Process Identifier)
   * 프로세스를 내부적으로 식별 할 수 있는 ID

2. 프로세스 문맥(Process Context)
   * 프로세스가 실행되는 정보
   * 프로세스 중단(Timer Runout)시 문맥 정보를 가지고 있다가 실행(Running)시 이어서 실행하기 위해 필요하다
3. 할당 메모리 주소
   * 프로세스에 할당된 메모리의 주소 포인터 값
4. 프로세스 우선 순위
   * 프로세스 우선 순위가 높은 순서대로 프로세서를 할당받는다.
5. 프로세스 상태
   * 현재 프로세스의 상태
6. 프로세스 권한
   * 프로세스가 접근할 수 있는 자원의 범위를 결정한다.



### 프로세스의 상태와 동작

![image-20210107231449248](post_img/2021-01-07-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8A%A4%EC%99%80-%EC%93%B0%EB%A0%88%EB%93%9C/image-20210107231449248.png)

#### 프로세스 상태

1. New
   * 프로그램이 메모리에 load되어 프로세스가 생성 된 상태
2. Ready
   * 프로세스가 프로세서를 할당받아 실행되기위해 대기중인 상태
3. Running
   * 프로세스가 실행되고 있는 상태
4. Waiting
   * 프로세스가 입출력등의 이벤트가 발생하면 자원을 일시적으로 반납하고 대기중인 상태
   * 입출력의 경우 프로세서 동작속도에 비해 매우 느리기 때문에 동작이 끝날때까지 프로세서가 대기하는 시간이 발생하게 됨.
   * 이를 줄이고자 시간이 오래 걸리는 이벤트가 발생시 자원을 반납하고 대기 큐에 대기하고 있다가 이벤트가 완료되면 발생되는 인터럽트에 의해 대기 큐에서 나와 나머지 작업을 이어서 수행
5. Terminatd
   * 프로세스가 완전히 종료되어 제거된 상태



#### 프로세스 동작

1. Dispatch
   * Ready중인 프로세스들 중 우선순위가 가장 높은 프로세스에 프로세서를 할당한다.
2. Timer Runout
   * 지정된 할당시간이 종료되면 프로세스는 할당받은 자원을 반납하고 Ready 상태로 돌아간다.
3. Block
   * 입출력 등 시간이 걸리는 이벤트 발생시 자원을 일시적으로 반납하고 Waiting 상태로 바뀐다.
4. Wake up
   * 이벤트 처리가 완료된 프로세스를 Ready 상태로 바꾼다.



### Context Switching